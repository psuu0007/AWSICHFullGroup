형 변환 함수

데이터 타입을 다양한 형식으로 출력하고 싶을 경우에 
사용되는 함수이다
형변환 함수는 크게 두 가지 방식이 있다

데이터 유형 변환의 종류

명시적(Explicit) : 데이터 변환형 함수로 데이터 유형을 변환하도록 명시해 주는 경우 
데이터 유형 변환

암시적(Implicit) : 데이터베이스가 자동으로 데이터 유형을 변환하여 계산하는 경우
데이터 유형 변환

주의: 묵시적 데이터 유형 변환의 경우 성능 저하가 발생할 수 있으며,
자동적으로 데이터베이스가 알아서 계한하지 않는 경우가 있어 
에러를 발생할 수 있으므로 명시적인 데이터 변환 방법을 사용하는 것이 바람직하다

to_char(숫자 or 날짜, format) 날짜형 혹은 숫자형을 문자형으로 변환한다
to_date(문자열, format) 문자형을 날짜형으로 변환한다
to_number(문자열, format) 문자형을 숫자형으로 변환한다

to_number에서의 format 종류

to_char(문자열, format)
--Date 타입을 varchar2의 문자로 변환한다

to_char에서 format 종류
대소문자 구분
YYYY	년도표현(4자리)
YY		년도표현(2자리)
MM		월을 숫자로 표현
MON		월을 알파벳으로 표현
DAY		요일 표현
DY		요일을 약어로 표현
DD		일

AM or PM	오전 오후 시각 표시
HH or HH12	12시간으로 표현(1~12)
HH24		24시간으로 표현
MI			분
SS			초

숫자형을 문자형으로 변환하기
0   자릿수를 나타내며 자릿수가 맞지 않을 경우 0으로 채운다
9	자릿수를 나타내며 자릿수가 맞지 않아도 채우지 않는다
L	각 지역별 통화 기호를 앞에 표시한다
,	천 단위 자리 구분
.	소수점 표현


형 변환

NUMBER			CHARCTER		DATE
		->					->
		<-					<-


사원들의 근무년수를 구하시오
사원명	현재날짜					HIREDATE					
		2022-08-08 09:00:00		????년??월??일 ??:??:??
근무초	근무일수	근무년차
??초		???일	??년				


환율 구하기

여러 분이 여행가고 싶은 곳?

한국(원)    미국(달러)     ???

10,000		???   		???


NULL을 다른 값으로 변환하는 NVL함수


NULL + 2
NULL * 2	->		NULL
등				
모든 산술 연산은 NULL을 반환한다

형식
NVL(표현식1, 표현식2)
표현식1의 결과값이 NULL이면 표현식2의 값을 출력한다
단, 표현식1과 표현식2의 결과 데이터 타입이 같아야 한다
NULL 관련 가장 많이 사용되는 함수이므로 중요하다



선수 테이블에서 성남 일화천마 소속 선수의 이름과 포지션을
출력하는데, 포지션이 없는 경우는 없음으로 표시하시오
선수명	POSITION	포지션
차경복	DF			DF
정학범	NULL		없음
안익수	NULL		없음




사원의 급여와 커미션을 포함한 연봉을 계산하시오
사원명	월급		커미션	연봉(연봉+커미션)
SMITH	800		NULL임	9600
ALLEN	1600	300		19500
WARD	1250	500		15500
JONES	2975	NULL임	35700
MARTIN	1250	1400	16400
BLAKE	2850	NULL임	34200
CLARK	2450	NULL임	29400
KING	5000	NULL임	60000
TURNER	1500	NULL임	18000
JAMES	950		NULL임	11400
FORD	3000	NULL임	36000
MILLER	1300	NULL임	15600




모든 사원에게 상사가 있다
하지만 EMP테이블에 유일하게 상사가 없는 로우가 있는데
그 사원의 MGR 컬럼값이 NULL이다
상관이 없는 사원만 출력하되
MGR 컬럼값이 NULL 대신 C E O로 출력하시오

사원번호	사원명	MANAGER
				C E O



조건에 따라 서로 다른 처리가 가능한 CASE 함수

IF-THEN-ELSE 논리와 유사한 방식의 표현식

형식
CASE
	SIMPLE_CASE_EXPRESS 조건
	ELSE 표현절
END
SIMPLE_CASE 조건이 맞으면 SIMPLE_CASE_EXPRESS 조건 내의
THEN 절을 수행하고 조건이 맞지 않으면 ELSE 절을 수행한다


CASE 
	SEARCHED_CASE_EXPRESS 조건
	ELSE 표현절
END
SEARCHED_CASE 조건이 맞으면 SEARCHED_CASE_EXPRESS 조건내의
THEN 절을 수행하고, 조건이 맞지 않으면 ELSE 절을 수행한다

CASE 
	WHEN 조건1 THEN 결과1
	WHEN 조건2 THEN 결과2
	WHEN 조건3 THEN 결과3
	ELSE 결과N
END






사원정보에서 급여가 3000 이상이면 상등급
1000이상이면 중등급
1000미만이면 하등급으로 분류하시오
사원명	SAL		SALARY_GRADE
		800		LOW
		1500	MID	
		3000	HIGH




사원정보에서 급여가 2000 이상이면 보너스를 1000으로
1000 이상이면 500으로 1000미만이면 0으로 계산하시오


그룹 함수, 집계 함수(Aggregate Function)
여러 행들의 그룹이 모여서 그룹당 단 하나의 결과를 돌려주는 다중행 함수 중
집계 함수의 특성

- 여러 행들의 그룹이 모여서 그룹당 하나의 결과를 돌려주는 함수이다
- group by 절은 행들을 소그룹화 한다
- select, having, order by 절에 사용할 수 있다
- 그룹함수를 사용하면 NULL인 것을 제외하고 계산한다

sum		그룹의 누적 합계를 반환한다
avg		그룹의 평균을 반환
count	그룹의 총 개수
max		그룹의 최대값
min		그룹의 최소값을 반환한다

1.
가장 최근에 입사한 사원의 입사일과 입사한지 가장 오래된 사원의 입사일을 
출력하는 SQL문을 작성하시오
최근입사일		오래된입사일
????-??-??	????-??-??

2.
10번 부서 소속의 사원 중에서 커미션을 받는 사원의 수를 구하시오
사원수


사원 중 이름이 사전순으로 가장 뒤에 나오는 
사원을 조회하시오

















"not a single-group group function"

에러가 발생한 이유는 그룹 함수의 결과값은 하나인데
그룹 함수를 적용하지 않은 단순 컬럼의 로우의 개수는 12개이므로
산출되는 로우의 수가 달라 둘을 매치시킬 수 없기 때문이다






























